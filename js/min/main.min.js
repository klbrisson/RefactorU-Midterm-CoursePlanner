function convertTime(e){var r,t,n,s;if("number"==typeof e){if(0>e||e>23)throw new Error("Time out of range. Must be between 0 and 23 (inclusive)");return n=e,r=12>n?"am":"pm",t=12>=n?n:n-12,s=0===n?"12:00 am":t+":00 "+r,console.log(s),s}if("string"==typeof e){if(s=e,t=+s.slice(0,s.indexOf(":")),r=s.slice(s.length-2).toLowerCase(),"am"!==r&&"pm"!==r)throw new Error('Time format is incorrect. convertTime() accepts "hh:mm xm" or "h:mm xm" or "h: xm"');return 12===t?"am"===r?0:12:n="am"===r?t:t+12}}function findObject(e,r){var t=e.filter(function(e){return r.toLowerCase()===e.name.toLowerCase()});return t[0]}function Course(e,r,t,n,s,o,i){this.department=e,this.code=r,this.courseCode=e+r,this.name=t,this.credits=n,this.semesters=s,this.description=o,this.prereqs=i}function Major(e,r,t){this.name=e,this.department=r,this.requiredCourses=t}function Schedule(e,r){this.allSemesters=[];for(var t=0;r>t;t++){var n="sem-fall"+(e+t),s="sem-spring"+(e+t+1);this[n]=[],this[s]=[],this.allSemesters.push(n),this.allSemesters.push(s)}}function findRequiredCourses(e){var r=majorList.filter(function(r){return e===r.name}),e=r[0],t=e.requiredCourses;return t}function searchForCourse(e,r){var t=e.filter(function(e){return-1!==e.name.toLowerCase().indexOf(r.toLowerCase())||-1!==e.courseCode.toLowerCase().indexOf(r.toLowerCase().replace(" ",""))?!0:!1});return t}function filterByCode(e,r){if(0===e.length)return e;var t=e.filter(function(e){return e.courseCode===r});return t}function filterOutMajorCourses(e,r){if(void 0===r)return[];var t=e.filter(function(e){return-1===r.requiredCourses.indexOf(e)});return t}function createYear(){var e=$(".year.template").clone();return e.removeClass("template"),e.find(".course.template").remove(),e}function addYears(e,r){$("#years-container").empty();for(var t=0;e>t;t++){var n="Fall "+(r+t),s="Spring "+(r+t+1),o=createYear();o.find(".year-fall").text(n),o.find(".year-spring").text(s),o.find(".credits").eq(0).find("span").addClass("credits-sem-"+n.toLowerCase().replace(" ","")),o.find(".credits").eq(1).find("span").addClass("credits-sem-"+s.toLowerCase().replace(" ","")),$("#years-container").append(o)}}function mapCreateCourse(e){return e.map(function(e){return e.createCourse()})}function strToSum(e){if(""===e)return 0;var r=e.split(""),t=!0;r=r.map(function(e){return"number"!=typeof+e&&(t=!1),+e});var n=r.reduce(function(e,r){return e+r});return n}var E140=new Course("E",140,"The Study of Literature",3,["F"],"Basic principles of reading literary texts."),MATH117=new Course("MATH",117,"College Algebra in Context I",1,["F","S","SS"],"Functions as mathematical models. Linear, quadratic, and polynomial functions considered symbolically, graphically, numerically, and contextually."),MATH118=new Course("MATH",118,"College Algebra in Context II",1,["S","SS"],"Reciprocals of linear functions, rational functions, and power functions considered symbolically, graphically, numerically, and contextually. ",["MATH117"]),MATH141=new Course("MATH",141,"Calculus in Management Sciences",3,["F","S","SS"],"Analytic geometry, limits, equilibrium of supply and demand, differentiation, integration, applications of the derivative, integral.",["MATH118"]),MATH155=new Course("MATH",155,"Calculus for Biological Scientists I",4,["F","S","SS"],"Limits, continuity, differentiation, and integration of elementary functions with applications in the biosciences. Programmable graphing calculator required. "),MATH160=new Course("MATH",160,"Calculus for Physical Scientists I",4,["F","S","SS"],"Limits, continuity, differentiation, and integration of elementary functions with applications; conic sections."),CS110=new Course("CS",110,"Personal Computing",4,["F","S","SS"],"Hardware/software concepts, Internet services, OS commands, electronic presentations, spreadsheets, databases, programming concepts."),CS122=new Course("CS",122,"Theory for Introductory Programming",1,["F","S"],"Set theory, definitions operations, Venn diagrams, power sets, propositional logic and proofs. Functions; loop invariants",["MATH118","CS161"]),CS150=new Course("CS",150,"Interactive Programming with Java",4,["F","S"],"Introduction to object-oriented programming with Java; problem solving, creating applets for Web pages, and graphical user interfaces."),CS160=new Course("CS",160,"Foundations in Programming",4,["F","S"],"Introduction to computer theory, programming and systems. Sets, functions, logic. Procedural programming in Java. Computer and data models",["MATH118"]),CS161=new Course("CS",161,"Object-Oriented Problem Solving",4,["F","S"],"Fundamental object oriented concepts, inheritance, polymorphism, basic algorithms, linked lists, assertions, recursion, induction, counting.",["CS160",["MATH141","MATH155","MATH160"]]),ART100=new Course("ART",100,"Introduction to the Visual Arts",3,["F","S","SS"],"Exploration of the development of visual arts."),ART101=new Course("ART",101,"Visual Form",3,["F","S","SS"],"Two- and three-dimensional design to develop visual awareness and insight into structure and organization of visual arts."),ART105=new Course("ART",105,"Issues and Practices in Art",1,["F","S"],"Current issues, practices, and resources in the visual arts; integration of unified vocabulary in various art disciplines."),comSci=new Major("Computer Science","CS",[MATH117,MATH118,CS110,CS122,CS160,CS161]),eng=new Major("English","E",[E140]),math=new Major("Math","MATH",[MATH117,MATH118,MATH160]),art=new Major("Art","ART",[ART100,ART101,ART105]),courseList=[E140,MATH117,MATH118,MATH141,MATH155,MATH160,CS110,CS122,CS150,CS160,CS161,ART100,ART101,ART105],majorList=[comSci,eng,math,art];Course.prototype.createCourse=function(){var e=$(".course.template").clone();if(e.find(".course-code").text(this.department+" "+this.code),e.find(".course-name").text(this.name),e.find(".course-credits").text(this.credits),e.find(".course-description").text(this.description),e.removeClass("template"),void 0!==this.prereqs){var r=this.prereqs.join(", ");e.find(".course-prerequisites").text(r)}var t=this.semesters.join(", ");return e.find(".course-semesters").text(t),e},Major.prototype.createMajor=function(){var e=$("<option></option>");return e.text(this.name),e},Schedule.prototype.arePrereqsTaken=function(e,r){if(void 0===e.prereqs)return!0;for(var t=0,n=!1,s=0;s<e.prereqs.length;s++){var o=e.prereqs[s];for(key in this){var i=-1!==key.indexOf("sem-"),a=this.allSemesters.indexOf(key)<this.allSemesters.indexOf(r),c=this[key];if(i&&a)if(o instanceof Array){var u=o.map(function(e){return filterByCode(c,e).length>0});-1===u.indexOf(!0)||n||(t++,n=!0)}else{var l=filterByCode(this[key],o).length>0;l&&t++}}}return t===e.prereqs.length?!0:!1},Schedule.prototype.isCourseOffered=function(e,r){return currSemester=r.charAt(4).toUpperCase(),-1!==e.semesters.indexOf(currSemester)},$(document).on("ready",function(){function e(){l=+$("#starting-year").val(),d=+$("#select-years").val(),addYears(d,l),u=new Schedule(l,d),$(".sortable").sortable(),$(".sortable, .sortable").sortable({connectWith:".connected"})}function r(e){$("#years-container").find(".course-code").each(function(){var r=$(this).text().replace(" ",""),t=filterByCode(courseList,r)[0],n="sem-"+$(this).closest(".semester").find(".semester-label").text().replace(" ","").toLowerCase();e[n].push(t);var s=u.arePrereqsTaken(t,n);s||($(this).closest(".course").addClass("highlight-error"),$(this).closest(".course").find(".prereq-error").show());var o=u.isCourseOffered(t,n);o||($(this).closest(".course").addClass("highlight-error"),$(this).closest(".course").find(".semester-error").show())})}function t(e,r){$(".course").removeClass("highlight-error"),$(".course").find(".prereq-error").hide(),$(".course").find(".semester-error").hide(),$(".semester").each(function(){u[r]=[]})}function n(e){var r=12>e?"am":"pm",t=12>=e?e:e-12,n=t+":00 "+r;if(12===e)var s=$('<option selected="selected">'+n+"</option>");else var s=$("<option>"+n+"</option>");return s}function s(e){for(var r=5;24>r;r++)$(e).append(n(r))}function o(e){var r=$(".hour.template").clone();return r.find(".time").text(e),r.removeClass("template"),r}function i(e,r){$(".week-container").empty();for(var t=e;r>=t;t++){var n=12>t?"am":"pm",s=12>=t?t:t-12,i=s+":00 "+n;$(".week-container").append(o(i))}$(".sortable").sortable(),$(".sortable, .sortable").sortable({connectWith:".connected"})}for(var a=(new Date).getFullYear(),c=a-10;a+10>=c;c++)c===a?$("#starting-year").append('<option selected="selected">'+c+"</option>"):$("#starting-year").append("<option>"+c+"</option>");var u,l=+$("#starting-year").val(),d=+$("#select-years").val();e(),$(document).on("change","#starting-year",function(){e()}),$(document).on("change","#select-years",function(){e()}),$("#required-courses").append(mapCreateCourse(courseList)),$("#select-major").append(majorList.map(function(e){return e.createMajor()})),$(document).on("change","#select-major",function(){var e=$(this).val();if($("#required-courses").empty(),"Select Major"===e)return $("#required-courses").append(mapCreateCourse(courseList)),void 0;var r=findRequiredCourses(e);$("#required-courses").append(mapCreateCourse(r)),$("#required-courses").find(".course").addClass("required-course")}),$(document).on("click",".course-name",function(){$(this).closest(".course").find(".course-info").toggle()}),$(document).on("click","#course-list-btn",function(){var e=findObject(majorList,$("#select-major").val());if($("#elective-search").closest("form")[0].reset(),void 0!==e){var r=filterOutMajorCourses(courseList,e);$("#course-listing").empty(),$("#course-listing").append(mapCreateCourse(r)),$("#course-listing").find(".course-info").append('<div><button class="add-elective-btn btn btn-default btn-xs">Add Elective</button></div>')}}),$(document).on("keyup","#elective-search",function(){var e=findObject(majorList,$("#select-major").val());if(void 0!==e){var r=filterOutMajorCourses(courseList,e);$("#course-listing").empty();var t=$(this).val();$("#course-listing").append(mapCreateCourse(searchForCourse(r,t))),$("#course-listing").find(".course-info").append('<div><button class="add-elective-btn btn btn-default btn-xs">Add Elective</button></div>')}}),$(document).on("keyup","#course-search",function(){var e=findObject(majorList,$("#select-major").val()),r=void 0===e?courseList:e.requiredCourses;$("#required-courses").empty();var t=$(this).val();$("#required-courses").append(mapCreateCourse(searchForCourse(r,t))),void 0!==e&&$("#required-courses").find(".course").addClass("required-course")}),$(document).on("click",".add-elective-btn",function(){var e=$(this).closest("li").clone();e.find(".course-info").hide(),$("#my-electives").append(e),$("#my-electives").find(".course").addClass("elective-course"),$(this).closest("li").find(".course-info").toggle()}),$(document).on("sortreceive",".semester",function(){var e="sem-"+$(this).find(".semester-label").text().replace(" ","").toLowerCase(),n=$(this).closest(".semester").find(".course-credits").text();n=strToSum(n),$(this).closest(".year").find(".credits-"+e).text(n),t(u,e),r(u)}),$(document).on("sortremove",".semester",function(){var e="sem-"+$(this).find(".semester-label").text().replace(" ","").toLowerCase(),n=$(this).closest(".semester").find(".course-credits").text();n=strToSum(n),$(this).closest(".year").find(".credits-"+e).text(n),t(u,e),r(u)}),s("#start-time"),s("#end-time"),i(8,18),$(document).on("change","#start-time",function(){var e=convertTime($("#start-time").val()),r=convertTime($("#end-time").val());i(e,r)}),$(document).on("change","#end-time",function(){var e=convertTime($("#start-time").val()),r=convertTime($("#end-time").val());i(e,r)})});